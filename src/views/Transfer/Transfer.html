<section class="transfer fill-height" ref="transfer">
  <v-tabs v-model="selectedTab" background-color="primary lighten-2" class="elevation-2" dark grow>
    <v-tabs-slider color="accent"></v-tabs-slider>

    <v-tab v-for="(tab, index) in tabs" :key="index" @click="switchTo(tab, index)">
        {{ tab }}
    </v-tab>
  </v-tabs>
  <v-card>
    <v-card-text>
      <v-col>
        <v-row dense class="pr-2 pt-1" justify="end">
          <v-btn v-if="active == 'send'" small text @click="scanQR()">
            Scan QR
            <v-icon class="ml-2">fas fa-qrcode</v-icon>
          </v-btn>
          <v-btn v-else small text @click="scanQR()" style="visibility: hidden">
          </v-btn>
        </v-row>

        <v-row dense>
          <v-col dense>
            <v-select class="mt-1 pt-0" :label="selectedTab == 1 ? 'From' : 'To'" @change="selectAccount"
              :items="accounts" v-model="selectedAccount" return-object append-icon="fas fa-caret-down">
              <template v-slot:selection="data">
                <div style="width: 100%; display: flex;">
                  <span class="text-capitalize">{{ data.item.name }}</span>
                  <v-spacer></v-spacer>
                  {{ data.item.balances[0].balance | formatBalance }} {{data.item.balances[0].asset_code }}
                </div>
              </template>
              <template v-slot:item="data">
                <v-row class="text-capitalize">
                  <v-col cols="7">
                    {{ data.item.name }}
                  </v-col>
                  <v-spacer></v-spacer>
                  <v-col cols="5" align="end">
                    {{ data.item.balances[0].balance | formatBalance  }} {{data.item.balances[0].asset_code }}
                  </v-col>
                </v-row>
              </template>
            </v-select>
          </v-col>
        </v-row>

        <FormComponent ref="formComponent" :formObject="formObject" :selectedTab="selectedTab" :accounts="accounts"
          :selectedAccount="selectedAccount">
        </FormComponent>

        <v-row>
          <v-col>
            <span v-if="$route.query.tab != 'receive'">Fee: 0.1 TFT</span>
            <v-btn class="mx-0 mt-3" style="width: 100%;" color="accent" @click="transferConfirmed"
              :disabled="!formObject.amount">
              <div v-if="$route.query.tab === 'receive'">
                Generate QR
              </div>
              <div v-if="$route.query.tab === 'send'">
                Send Tokens
              </div>
            </v-btn>
          </v-col>
        </v-row>
      </v-col>
    </v-card-text>
  </v-card>
  <TransactionInfoDialog v-if="transactionInfoDialog" :dialog="transactionInfoDialog"
    :closeDialog="closeTransactionInfoDialog" :accounts="accounts" :send="send" :selectedAccount="selectedAccount"
    :formObject="formObject">
  </TransactionInfoDialog>

  <QrDialog v-if="qrDialog" :dialog="qrDialog" :closeDialog="closeQrDialog" :formObject="formObject"
    :selectedAccount="selectedAccount" :selectedTab="selectedTab"></QrDialog>
</section>