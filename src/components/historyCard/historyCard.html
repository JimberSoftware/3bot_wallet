<section class="history-card">
  <v-card ripple
    :class="`mb-2 clickable ${!transaction.confirmed ? 'grey lighten-1' : ''} ${outgoing ? 'outgoing' : 'incoming'}`"
    @click="show = true">
    <v-card-text>
      <v-row align="center">
        <v-avatar v-if="$vuetify.breakpoint.mdAndUp" class="ml-3">
          <v-icon class="primary" color="white">person</v-icon>
          <!-- <v-img src="https://i.pravatar.cc/50?img=50"></v-img> -->
        </v-avatar>
        <v-col cols="8" class="ml-2">
          <v-row>
            <span
              class="subheading font-weight-medium text-uppercase text-truncate ">{{outgoing? receiver : sender}}</span>
          </v-row>
          <v-row>
            <span class="font-weight-light text-truncate" v-if="transaction.message">{{transaction.message}}</span>
          </v-row>
        </v-col>
        <v-col class="mr-2">
          <amountIndicator :color="outgoing? 'error' : 'accent'" :amount='amount' :valuta='valuta' align="right"/>
        </v-col>
      </v-row>
    </v-card-text>
  </v-card>

  <v-dialog scrollable v-model="show" v-if="show" max-width="500">
    <v-card>
      <v-toolbar dark color="primary">
        <v-toolbar-title class="text-uppercase">
          <v-icon>
            info
          </v-icon>
          Transaction info
        </v-toolbar-title>
        <v-spacer></v-spacer>
        <v-btn text icon @click="show = false">
          <v-icon>
            close
          </v-icon>
        </v-btn>
      </v-toolbar>
      <v-card-text>
        <v-row align="center" class="my-3 text-center">
          <v-col cols="5">
            <v-avatar>
              <v-icon class="primary" color="white">person</v-icon>
            </v-avatar>
            <p class="body-1 pt-2 text-truncate">{{sender}}</p>
          </v-col>
          <v-col cols="2">
            <v-avatar>
              <v-icon size="25">keyboard_arrow_right</v-icon>
            </v-avatar>
          </v-col>
          <v-col cols="5">
            <v-avatar>
              <v-icon class="primary" color="white">person</v-icon>
            </v-avatar>
            <p class="body-1 pt-2 text-truncate">{{receiver}}</p>
          </v-col>
        </v-row>
        <p class="subtitle mb-0 grey--text">Date</p>
        <p class="title mt-0">{{timeStamp | formatDate}} </p>
        <p class="subtitle mb-0 grey--text">Amount
          <span v-if="outgoing && transaction.outputs.some(x => x.is_fee)">(fee incl)</span>
        </p>
        <p class="title mt-0">{{amountModal}}</p>
        <p v-if="outgoing && transaction.outputs.some(x => x.is_fee)" class="subtitle mb-0 grey--text">Fee</p>
        <p v-if="outgoing && transaction.outputs.some(x => x.is_fee)" class="title mt-0">{{fee}}</p>
        <p v-if="transaction.message" class="subtitle mb-0 grey--text">Message</p>
        <p v-if="transaction.message" class="title mt-0">{{transaction.message}}</p>
      </v-card-text>
    </v-card>
  </v-dialog>
</section>